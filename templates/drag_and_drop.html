<!doctype html>
<html>

<head>
    {% block head %}
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.sandbox.google.com/css2?family=Material+Symbols+Outlined"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
              crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.1/font/bootstrap-icons.css">

        <title>{% block title %} Drag og drop ord i riktig rekkefølge {% endblock %}</title>
        <script src="../static/jquery.sortable.js"></script>
        <!--jquery.sortable.js. This file contains code that enables drag-and-drop sorting functionality on HTML elements using jQuery.-->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">



    {% endblock %}
</head>


<body>
{% block content %}
    <!--style the areal for drag and drop-->
    <style>
        .table-sortable {
            position: relative;
        }

        .table-sortable .sortable-placeholder {
            height: 37px;
        }

        .table-sortable .sortable-placeholder:after {
            position: absolute;
            z-index: 10;
            content: " ";
            height: 37px;
            background: #f9f9f9;
            left: 0;
            right: 0;
        }
    </style>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="alert" role="alert">
                {% for category, message in messages %}
                    <div class="container fixed-bottom mb-3">
                        <div class="alert alert-{{ category }} alert-dismissible fade show border-question-alert justify-content-between align-items-center"
                             role="alert">
                            <div class="d-flex justify-content-around">
                                <p>
                                    {{ message }}
                                </p>
                                <a href="{{ url_for('course', course_status=course_status) }}" class="btn btn-{{ category }}">Continue</a>
                            </div>
                        </div>

                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}


    <div class="d-flex justify-content-center px-5 py-5 vh-100">
        <div class="container m-2">
            <div class="card" style="border: none">
                <a href="{{ url_for('learn') }}">
                    <i class="bi bi-x-lg"></i>
                </a>
                <div class="card-header bg-transparent text-center px-5 mx-5 vh-100" style="border: none">
                    <h1 class="pb-5">Level: Bronse</h1>
                    <div class="pb-4"><h2>Drag og drop ord i riktig rekkefølge</h2></div>
                    <div class="d-flex container">
                        <div class="col-md-12">
                            <div class="row">
                                <h5 class="pb-5">{{ question }}</h5>
                            </div>

                            <form class="vh-100" method="POST"
                                  action="{{ url_for('drag_and_drop') }}">

                                <ul class="list-group list-group-sortable">
                                    {% for q in dragdrop %}
                                        <li class="list-group-item" id="{{ q['id'] }}">{{ q['text'] }}</li>
                                    {% endfor %}
                                </ul>


                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <input type="hidden" name="answer" id="order_form" value="{{ order | join(',') }}">


                                <div class="d-flex justify-content-around">
                                    <button type="button" class="btn btn-outline-secondary">Skip</button>
                                    <button
                                            {{ disabled }}
                                            id="submit-btn"
                                            type="submit"
                                            class="btn btn-primary">Check
                                    </button>
                                </div>
                                {% with messages = get_flashed_messages(with_categories=true) %}
                                    {% for category, message in messages %}
                                        <div class="alert alert-{{ category }}">
                                        <div class="d-flex justify-content-around">
                                            <p>
                                                {{ message }}
                                            </p>
                                            <a href="{{ url_for('course', questions=questions, course_status=course_status) }}"
                                               class="btn btn-{{ category }}">Continue</a>
                                        </div>
                                    {% endfor %}
                                {% endwith %}
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    {# drag and drop script #}
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="../static/jquery.sortable.js"></script>
    <script>

        $(function () {
            $('.list-group-sortable').sortable({
                placeholderClass: 'list-group-item'
            }).bind('sortupdate', function (e, ui) {
                currentOrder = []
                for (let choice of e.target.children) {
                    currentOrder.push(choice.id)
                }
                document.getElementById('order_form').value = currentOrder
                //ui.item contains the current dragged element.
                //Triggered when the user stopped sorting and the DOM position has changed.
            });
        });
    </script>


{% endblock %}


</body>


</html>